@import 'tailwindcss';

@plugin "@tailwindcss/forms";
@plugin "@tailwindcss/typography";
@plugin "tailwind-scrollbar";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --font-*: initial;
  --font-inter: Inter, system-ui, sans-serif;
  --font-roboto: Roboto, system-ui, sans-serif;

  --animate-wiggle: wiggle 1s ease-in-out infinite;
  --animate-fade-in-down: fade-in-down 0.3s ease-out;
  --animate-fade-out-down: fade-out-down 0.3s ease-out;
  --animate-fade-in-up: fade-in-up 0.3s ease-out;
  --animate-fade-out-up: fade-out-up 0.3s ease-out;

  --shadow-custom: 0px 0px 50px 0px rgb(82 63 105 / 15%);

  --color-border: var(--border);
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-soft-blue-50: oklch(0.977 0.013 236.62); /* Light soft blue for accents */
  --color-soft-blue-100: oklch(0.929 0.026 236.62); /* Extended for backgrounds */

  @keyframes wiggle {
    0%, 100% {
      transform: rotate(-3deg);
    }
    50% {
      transform: rotate(3deg);
    }
  }

  @keyframes fade-in-down {
    0% {
      opacity: 0;
      transform: translateY(-10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-out-down {
    from {
      opacity: 1;
      transform: translateY(0px);
    }
    to {
      opacity: 0;
      transform: translateY(10px);
    }
  }

  @keyframes fade-in-up {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-out-up {
    from {
      opacity: 1;
      transform: translateY(0px);
    }
    to {
      opacity: 0;
      transform: translateY(10px);
    }
  }
}

@utility container {
  padding-inline: 1rem;

  @media (width >= theme(--breakpoint-sm)) {
    padding-inline: 2rem;
  }

  @media (width >= theme(--breakpoint-lg)) {
    padding-inline: 4rem;
  }

  @media (width >= theme(--breakpoint-xl)) {
    padding-inline: 5rem;
  }

  @media (width >= theme(--breakpoint-2xl)) {
    padding-inline: 6rem;
  }
}

@utility equal-row-grid {
  display: grid;
  grid-auto-rows: minmax(0, 1fr);
}

/* Tailwind v4 border color compatibility */
@layer base {
  *, ::after, ::before, ::backdrop, ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }

  body {
    font-family: var(--font-inter);
    background-color: var(--color-soft-blue-50); /* Soft blue background for light mode */
  }

  .dark body {
    background-color: var(--color-soft-blue-100); /* Darker soft blue for dark mode */
  }
}

@utility dropdown-content {
  @apply pointer-events-none scale-95 opacity-0 duration-100 ease-in;

  .dropdown:hover>& {
    @apply pointer-events-auto block scale-100 animate-fade-in-up opacity-100 duration-200;
  }
}

@utility dropdown {
  &:hover>.dropdown-content {
    @apply pointer-events-auto block scale-100 animate-fade-in-up opacity-100 duration-200;
  }
}

@layer base {
  :root {
    --background: #E5E7EB; /* gray-200 */
    --foreground: #111827; /* gray-900 */
    --card: #FFFFFF; /* white for cards in light */
    --card-foreground: #111827;
    --primary: #6366F1; /* indigo-500 */
    --primary-foreground: #FFFFFF;
    --muted: #F3F4F6; /* gray-100 */
    --muted-foreground: #4B5563; /* gray-600 */
    --destructive: #DC2626; /* red-600 */
    --destructive-foreground: #FFFFFF;
    --border: #D1D5DB; /* gray-300 for softer borders */
  }

  .dark {
    --background: #1F2937; /* gray-800 */
    --foreground: #FFFFFF;
    --card: #374151; /* gray-700 for dark cards */
    --card-foreground: #FFFFFF;
    --primary: #A5B4FC; /* indigo-300 */
    --primary-foreground: #111827;
    --muted: #111827; /* gray-900 */
    --muted-foreground: #9CA3AF; /* gray-400 */
    --destructive: #FCA5A5; /* red-300 */
    --destructive-foreground: #111827;
    --border: #4B5563; /* gray-600 */
  }

  @media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
      --background: #1F2937;
      --foreground: #FFFFFF;
      --card: #374151;
      --card-foreground: #FFFFFF;
      --primary: #A5B4FC;
      --primary-foreground: #111827;
      --muted: #111827;
      --muted-foreground: #9CA3AF;
      --destructive: #FCA5A5;
      --destructive-foreground: #111827;
      --border: #4B5563;
    }
  }

  /* Theme extensions for soft blue UI */
  :root[data-theme='blue'] {
    --primary: #2490FF;
    --background: var(--color-soft-blue-50);
  }

  .dark[data-theme='blue'] {
    --background: #02080F;
    --foreground: #F8FAFC;
    --card: #0B1117;
    --card-foreground: #F8FAFC;
    --primary-foreground: #0F1729;
    --muted: #1E293B;
    --muted-foreground: #94A3B8;
    --border: #1E293B;
  }

  /* Other themes remain as provided */
}

/** Scroll bar **/
@supports selector(::-webkit-scrollbar) {
  .supports-scrollbars\:pr-2 {
    padding-right: 0.5rem;
  }
}

/** Custom Forms Overrides for Material + Tailwind **/
[type='text'],
[type='email'],
[type='url'],
[type='password'],
[type='number'],
[type='date'],
[type='datetime-local'],
[type='month'],
[type='search'],
[type='tel'],
[type='time'],
[type='week'],
[multiple],
textarea,
select {
  @apply w-full rounded-full border border-border bg-background px-4 py-2 text-sm text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all;
}

[type='checkbox'],
[type='radio'] {
  @apply h-4 w-4 rounded border-border bg-background checked:border-primary checked:bg-primary focus:ring-2 focus:ring-primary/50;
}

.mat-mdc-card {
  @apply !rounded-xl !shadow-custom; /* Override Material card for custom shadow */
}

.mat-mdc-table {
  @apply !bg-transparent; /* Ensure no default bg conflict */
}

.mat-mdc-row {
  @apply border-b border-border last:border-0;
}

.mat-mdc-header-row {
  @apply bg-muted/50;
}

.mat-mdc-paginator {
  @apply bg-card border-t border-border text-muted-foreground px-4 py-2;
}

@layer components {
  .message-input {
    @apply sticky bottom-0 left-0 right-0 border-t border-border bg-background text-foreground z-10;
  }

  .chat-messages {
    @apply flex-1 overflow-y-auto p-4 space-y-4 bg-background min-h-0 pb-16 md:pb-14 sm:pb-12;
  }

  .chat-item-hover {
    @apply flex items-center justify-between gap-3 p-4 cursor-pointer hover:bg-card/50 dark:hover:bg-card/80;
  }

  .chat-item-text {
    @apply font-medium text-foreground truncate;
  }

  .delete-btn {
    @apply hidden group-hover:flex text-destructive hover:text-destructive/80 transition-opacity opacity-100 ml-2 dark:text-destructive-foreground;
  }

  /* New: Summary pill for colored summaries */
  .summary-pill {
    @apply px-4 py-2 rounded-full font-medium text-sm;
  }
}

.example-element-row td {
  border-bottom-width: 0;
}

.detail-row {
  height: 0;
}