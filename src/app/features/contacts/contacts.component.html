<!-- src/app/features/contacts/contacts.component.html -->
<div class="flex-col rounded-lg bg-background px-8 py-8 sm:flex-col">
  <div class="mb-4 flex items-center justify-between">
    <div class="flex-col items-center">
      <h3 class="text-md font-bold text-foreground">Contacts</h3>
      <span class="text-xs text-muted-foreground">Updated {{ updatedAgo }}</span> <!-- Dynamic update time -->
    </div>
    <button
      class="flex-none rounded-md bg-card px-4 py-2.5 text-xs font-semibold text-muted-foreground hover:bg-muted hover:text-foreground">
      History
    </button>
  </div>
  <!-- Search bar for AWS AppSync search -->
  <div class="mb-4 flex items-center gap-2">
    <input type="text" [(ngModel)]="searchQuery" placeholder="Search contacts in user pool..." class="w-full rounded-md border border-border bg-background px-4 py-2 text-sm text-foreground placeholder-muted-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all">
    <button (click)="performSearch()" class="rounded-md bg-primary px-4 py-2 text-sm font-semibold text-primary-foreground hover:bg-primary/90">Search</button>
  </div>
  <!-- Search results -->
  <div *ngIf="searchResults.length > 0" class="mb-4">
    <h4 class="text-sm font-semibold text-foreground">Search Results</h4>
    <ul class="space-y-2">
      <li *ngFor="let result of searchResults" class="flex items-center justify-between bg-card p-2 rounded-md">
        <span>{{ result.firstName }} {{ result.lastName }} ({{ result.email }})</span>
        <button (click)="addContact(result)" class="text-primary hover:text-primary/80">Add</button>
      </li>
    </ul>
  </div>
  <div class="relative overflow-x-auto">
    <table class="w-full table-auto">
      <!-- Table head -->
      <thead class="text-xs uppercase text-muted-foreground">
        <tr>
          <th class="py-3 text-left">Contact</th>
          <th class="py-3 text-right">Email</th>
          <th class="py-3 text-right">Date Added</th>
          <th class="py-3 text-right">Actions</th>
        </tr>
      </thead>
      <!-- end Table head -->
      <!-- Table body -->
      <tbody>
        <tr
          *ngFor="let contact of contacts"
          contacts-table-item
          [contact]="contact"
          (deleted)="onDelete($event)"
          class="border-b border-dashed border-border hover:bg-card"></tr>
      </tbody>
      <!-- end::Table body -->
    </table>
  </div>
</div>